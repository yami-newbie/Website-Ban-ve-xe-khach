@page
@model WebsiteBVXK.Pages.KhachHang.GiuongModel
@{
	Layout = "_Layout";
	ViewData["Tittle"] = "Chọn Ghế";
}

<link rel="stylesheet" href="~/css/ghe.css"/>

<div class="list-seats">
	<div class="vexe-container">
		<label><b>CHỌN GHẾ:</b></label>
		<select id="chon-tang" asp-for="tang">
			<option>Tầng Dưới</option>
			<option>Tầng Trên</option>
		</select>
	</div>

	<ul class="showcase">
		<li>
			<div class="seat1"></div>
			<small style="color: rgb(128, 128, 128);">Trống</small>
		</li>
		<li>
			<div class="seat selected"></div>
			<small style="color: blue;">Đang Chọn</small>
		</li>
		<li>
			<div class="seat sold"></div>
			<small style="color: white;">Đã Đặt</small>
		</li>
	</ul>

	<div  class="container">
		@{
			if(Model.ghes != null)
			{
				var start = ((Model.tang == "Tầng Dưới" ? 1 : 2) - 1) * Model.ghes.Count / 2;
				for (int i = 0 + start; i <= start + Model.ghes.Count / 6; i++)
				{
					<div class="row">
						@if(Model.ghes[i * 3].isPick){
							<form method="post" asp-route-id="@(i * 3)" asp-page-handler="clickGhe">
								<button value=@(i * 3) class="seat selected"></button>
							</form>
						}
						else{
							<form method="post" asp-route-id="@(i * 3)" asp-page-handler="clickGhe">
								<button value=@i class="seat"></button>
							</form>
						}
						@if(Model.ghes[i * 3 + 1].isPick){
							<form method="post" asp-route-id="@(i * 3 + 1)" asp-page-handler="clickGhe">
								<button value=@(i * 3 + 1) class="seat selected"></button>
							</form>
						}
						else{
							<form method="post" asp-route-id="@(i * 3 + 1)" asp-page-handler="clickGhe">
								<button value=@(i * 3 + 1) class="seat"></button>
							</form>
						}
						@if(i < start + Model.ghes.Count / 6)
						{
							@if(Model.ghes[i * 3 + 2].isPick){
							<form method="post" asp-route-id="@(i * 3 + 2)" asp-page-handler="clickGhe">
								<button value="@(i * 3 + 2)" class="seat selected"></button>
							</form>
							}
							else{
							<form method="post" asp-route-id="@(i * 3 + 2)" asp-page-handler="clickGhe">
								<button value="@(i * 3 + 2)" class="seat"></button>
							</form>
							}
						}
					</div>
				}
			}
		}
		
		@*<div class="row">
			<div class="seat"></div>
			<div class="seat"></div>
		</div>
		<div class="row">
			<div class="seat"></div>
			<div class="seat"></div>
		</div>
		<div class="row">
			<div class="seat"></div>
			<div class="seat"></div>
		</div>
		<div class="row">
			<div class="seat"></div>
			<div class="seat"></div>
		</div>
		<div class="row">
			<div class="seat"></div>
			<div class="seat"></div>
		</div>
		<div class="row">
			<div class="seat"></div>
			<div class="seat"></div>
		</div>*@
	</div>
	<p class="text">
		<ul>
			<li>Bạn đã chọn <b><span id="count">0</span></b> vé</li>
			<li>Số ghế của bạn <b><span id="count">A1</span></b></li>
			<li>Tổng tiền của bạn <b><span id="total">0<sup>đ</sup></span></b></li>
		</ul>
	</p>
	<br>
	<div class="btn12">
		<div class="btn1">
			<button class="btn1" type="button" value="Quay lai">
				<a asp-page="/KhachHang/ThongTinVe" class="btn btn-primary">
					Quay Lại
				</a>
			</button>
		</div>
		<div class="btn2">
			<button class="btn2" type="button" value="Tiep tuc">
				<a asp-page="/KhachHang/ThongTinKhachHang">Tiếp Tục</a>
			</button>
		</div>
	</div>
</div>


<script>
	var selector = document.getElementById("chon-tang");
	selector.addEventListener('change', (e) => {
		console.log(@(Model.tang));
		console.log(e.target.value);
	})
</script>